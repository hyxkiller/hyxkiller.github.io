<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/basketball.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/basketball.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/basketball.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/basketball.ico?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="黑洞的诞生">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="黑洞的诞生">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="黑洞的诞生">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>黑洞的诞生</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
    <a href="https://github.com/hyxkiller" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">黑洞的诞生</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">愿大家在前端的道路上越走越远</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/15/如何处理循环异步问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/15/如何处理循环异步问题/" itemprop="url">如何处理循环异步问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-15T11:25:59+08:00">
                2019-04-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  318
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h4><p>后台管理项目一般都需要很多数据处理，遇到一个场景：管理员可以上传0–+∞图片类型+图片的场景，将数据存起来后不知道会上传多少组数据，调多少次上传图片的接口(因为这个接口会返回各个文件的id，之后在组合id调上传信息的接口)，就想到将最后的数组循环调用然后等返回值，就设计到forEach不能和await共用的问题。</p>
<p>期初以为是async和await无法真正做到这种异步问题，就用Promise包了一层又一层，结果还是有问题。</p>
<h4 id="自己当时的解法"><a href="#自己当时的解法" class="headerlink" title="自己当时的解法"></a>自己当时的解法</h4><p>最后想了一个解法，在保存数据的数组外定义一个变量，每次循环变量+1，循环内判断当此变量等于数组的长度时，将所有数据组装调上传信息的接口。</p>
<h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>forEach只支持同步代码，只是简单的执行一下回调函数，不会处理异步代码。</p>
<h4 id="其他解法"><a href="#其他解法" class="headerlink" title="其他解法"></a>其他解法</h4><p>for…of (迭代器的一种实现，通过迭代器的方式遍历<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">async function test() &#123;</span><br><span class="line">    let arr = [1, 2, 3];</span><br><span class="line">    for(const val of arr)&#123;</span><br><span class="line">        const res = await 请求(val)</span><br><span class="line">        console.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/08/数组方法知识点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/08/数组方法知识点/" itemprop="url">数组方法知识点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-08T15:16:13+08:00">
                2019-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  475
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h3><p>无返回值，不支持链式调用。<br>可改变数组中引用类型的数据，不可改变值类型的数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var arr1 = [</span><br><span class="line">    &#123;name:&apos;A&apos;,age:16&#125;,</span><br><span class="line">    &#123;name:&apos;B&apos;,age:17&#125;</span><br><span class="line">];</span><br><span class="line">var arr2 = [1,2,3];</span><br><span class="line"></span><br><span class="line">arr1.forEach(item =&gt; &#123; </span><br><span class="line">    item.age = item.age + 1</span><br><span class="line">&#125;); </span><br><span class="line">// [&#123;name:&apos;A&apos;,age:17&#125;,&#123;name:&apos;B&apos;,age:18&#125;]</span><br><span class="line"></span><br><span class="line">arr2.forEach(item =&gt; &#123;</span><br><span class="line">    item = item * 2</span><br><span class="line">&#125;);</span><br><span class="line">// [1,2,3]</span><br></pre></td></tr></table></figure></p>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>原始数组无变化，必须有return(jsx中数组循环返回Dom都用map的原因)。<br>需要注意的是，如果做过滤处理，是行不通的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3,4,5].map(item =&gt; &#123; if(item &gt; 3) return item &#125;)</span><br><span class="line">// [undefined, undefined, undefined, 4, 5]</span><br></pre></td></tr></table></figure></p>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>筛选过滤</p>
<h3 id="some"><a href="#some" class="headerlink" title="some"></a>some</h3><p>返回值为bool</p>
<h3 id="every"><a href="#every" class="headerlink" title="every"></a>every</h3><p>返回值为bool</p>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><p>与map、filter不同的一点是，会改变原数组。<br>按Unicode码排序。</p>
<h3 id="findIndex"><a href="#findIndex" class="headerlink" title="findIndex"></a>findIndex</h3><p>可中断遍历，并返回相应需求的下标。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let arr = [&#123;name:&apos;A&apos;,age:16&#125;,&#123;name:&apos;B&apos;,age:17&#125;,&#123;    name:&apos;C&apos;,age:18&#125;]</span><br><span class="line">let index = arr.findIndex(item =&gt; item.age &gt; 16 );</span><br><span class="line">// 1</span><br></pre></td></tr></table></figure></p>
<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><p>可中断遍历，并返回符合条件的整个元素。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let arr = [&#123;name:&apos;A&apos;,age:16&#125;,&#123;name:&apos;B&apos;,age:17&#125;,&#123;    name:&apos;C&apos;,age:18&#125;]</span><br><span class="line">let item = arr.find(item =&gt; item.age &gt; 16 );</span><br><span class="line">// &#123;name:&apos;B&apos;,age:17&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><ol>
<li><p>只可对值类型的数据进行去重</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let mySet = new Set();</span><br><span class="line">mySet.add(1); // Set(1) &#123;1&#125;</span><br><span class="line">mySet.add(2); // Set(2) &#123;1, 2&#125;</span><br><span class="line">mySet.add(2); // Set(2) &#123;1, 2&#125; // 值类型唯一</span><br><span class="line">mySet.add(&apos;text&apos;); </span><br><span class="line">[...mySet] // [1,5,&apos;text&apos;]</span><br><span class="line"></span><br><span class="line">mySet.add(&#123;name:&apos;ha&apos;,age:18&#125;);</span><br><span class="line">mySet.add(&#123;name:&apos;ha&apos;,age:18&#125;);</span><br><span class="line">[...mySet] // [1,5,&apos;text&apos;,&#123;name:&apos;ha&apos;,age:18&#125;,&#123;name:&apos;ha&apos;,age:18&#125;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>引用类型去重方案</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Lodash的_.uniqWith()方法</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="数组的哪些API会改变原数组？"><a href="#数组的哪些API会改变原数组？" class="headerlink" title="数组的哪些API会改变原数组？"></a>数组的哪些API会改变原数组？</h3><ol>
<li>修改原数组的API有: <code>splice, reverse, fill, copyWithin, sort, push, pop, unshift, shift</code></li>
<li>不修改原数组的API有: <code>slice, map, forEach, every, filter, reduce, entry, entries, find</code></li>
</ol>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/08/原型链思考/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/08/原型链思考/" itemprop="url">原型链思考</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-08T12:05:26+08:00">
                2019-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  230
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>每个函数原型的构造器是它本身。     </li>
<li>每个函数的<code>_proto_</code>属性指向它的构造函数的prototype。 </li>
</ul>
<h3 id="原型链继承-深浅拷贝-值类型-引用类型"><a href="#原型链继承-深浅拷贝-值类型-引用类型" class="headerlink" title="原型链继承+深浅拷贝+值类型/引用类型"></a>原型链继承+深浅拷贝+值类型/引用类型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function Foo()&#123;</span><br><span class="line">  this.names = [&quot;Foo&quot;]; // 引用类型</span><br><span class="line">  this.hello = &apos;hello&apos;; // 值类型</span><br><span class="line">&#125;</span><br><span class="line">function foo()&#123;&#125;</span><br><span class="line"></span><br><span class="line">foo.prototype = new Foo();</span><br><span class="line"></span><br><span class="line">var i1 = new foo();</span><br><span class="line">i1.names.push(&quot;i1&quot;);</span><br><span class="line">i1.hello = &apos;world&apos;;</span><br><span class="line">console.log(i1.names); // [&apos;Foo&apos;, &apos;i1&apos;]</span><br><span class="line">console.log(i1.hello); // &apos;world&apos;</span><br><span class="line"></span><br><span class="line">var i2 = new foo(); </span><br><span class="line">console.log(i2.names); // [&apos;Foo&apos;, &apos;i1&apos;]</span><br><span class="line">console.log(i2.hello); // &apos;hello&apos;</span><br><span class="line"></span><br><span class="line">var i3 = new Foo(); </span><br><span class="line">console.log(i2.names); // [&apos;Foo&apos;]</span><br><span class="line">console.log(i2.hello); // &apos;hello&apos;</span><br></pre></td></tr></table></figure>
<h3 id="原型链示例代码"><a href="#原型链示例代码" class="headerlink" title="原型链示例代码"></a>原型链示例代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">var Foo = new Function();</span><br><span class="line">var foo = new Foo();</span><br><span class="line">Foo.__proto__.constructor === Foo</span><br><span class="line">false</span><br><span class="line"></span><br><span class="line">Foo.__proto__ === Function.prototype</span><br><span class="line">true</span><br><span class="line"></span><br><span class="line">Function.prototype.__proto__ == Object.prototype</span><br><span class="line">true</span><br><span class="line"></span><br><span class="line">Object.prototype.__proto__ == null</span><br><span class="line">true</span><br><span class="line"></span><br><span class="line">Foo.prototype.constructor == Foo</span><br><span class="line">true</span><br><span class="line"></span><br><span class="line">foo.__proto__ == Foo.prototype</span><br><span class="line">true</span><br><span class="line"></span><br><span class="line">foo.constructor == Foo</span><br><span class="line">true</span><br><span class="line"></span><br><span class="line">var Bar = new Object();</span><br><span class="line">Bar.__proto__ == Object.prototype</span><br><span class="line">true</span><br><span class="line">Bar.constructor == Object</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<h3 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">instanceof原理就是一层一层查找 __proto__，如果和 constructor.prototype 相等则返回 true，</span><br><span class="line">如果一直没有查找成功则返回 false。</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/19/记录一次nginx配置路由经历/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/19/记录一次nginx配置路由经历/" itemprop="url">记录一次Nginx配置路由经历</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-19T13:10:06+08:00">
                2019-03-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  237
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>碰到的业务场景：<br>因为在React项目中根目录/，有做重定向，又因为路由采用BrowserRouter，在Nginx的配置中将location / 的目录全部指向index.html，而遇到一个业务场景是要在现有的项目中有需要由一个特定的路由指向一个现成的html页面。<br>期初想法是新建一个location /xxx, root指向对应html,结果发现不管怎样去设置/xxx 的优先级还是会走到项目里的重定向。<br>后来在调研后，发现还是得在location / 下做文章，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    root   /usr/share/nginx/html;</span><br><span class="line">    index  index.html;</span><br><span class="line">    if ($uri = /xxx) &#123;</span><br><span class="line">        rewrite ^(.*)$ /$1.html last;</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">    try_files $uri $uri/ /index.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当uri碰到需要设置的/xxx路由，做一次rewrite重新匹配，指向目录下的相应html文件，last表示<code>完成该rewrite规则的执行后，停止处理后续rewrite指令集；然后查找匹配改变后URI的新location</code>.</p>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/06/Flutter如何国际化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/06/Flutter如何国际化/" itemprop="url">Flutter如何国际化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-06T16:49:59+08:00">
                2019-03-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/flutter/" itemprop="url" rel="index">
                    <span itemprop="name">flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  512
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>要做一个多语言的Flutter应用，有两种引入国际化的方法，一种是自定义Localizations结合Redux实现，可以做到实时切换，另一种是借助第三方工具intl，这里只介绍第一种方式（可结合上一篇状态管理一起学习）。</p>
<p>自定义多语言需要实现LocalizationsDelegate和Localizations，通过Localizations使用locale加载当前delegate。</p>
<ul>
<li>实现LocalizationsDelegate<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class DemoLocalizationDelegate extends LocalizationsDelegate&lt;DemoLocalizations&gt; &#123;</span><br><span class="line">  DemoLocalizationDelegate();</span><br><span class="line">  @override</span><br><span class="line">  &lt;!--支持的语言--&gt;</span><br><span class="line">  bool isSupported(Locale locale) =&gt; [&apos;en&apos;, &apos;zh&apos;].contains(locale.languageCode);</span><br><span class="line">  </span><br><span class="line">  &lt;!--根据locale，创建一个对象用于提供当前locale下的文本显示--&gt;</span><br><span class="line">  @override</span><br><span class="line">  Future&lt;DemoLocalizations&gt; load(Locale locale) &#123;</span><br><span class="line">    return SynchronousFuture&lt;DemoLocalizations&gt;(DemoLocalizations(locale));</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @override</span><br><span class="line">  bool shouldReload(DemoLocalizationDelegate old) =&gt; false;</span><br><span class="line">  </span><br><span class="line">  static DemoLocalizationDelegate delegate = DemoLocalizationDelegate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>DemoLocalizations为一个自定义对象，会根据创建时的Locale，</p>
<ul>
<li><p>实现Localizations</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class DemoLocalizations &#123;</span><br><span class="line">  final Locale locale;</span><br><span class="line">  DemoLocalizations(this.locale);</span><br><span class="line">  static DemoLocalizations of(BuildContext context) &#123;</span><br><span class="line">    return Localizations.of&lt;DemoLocalizations&gt;(context, DemoLocalizations);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  static Map&lt;String, LocaleBase&gt; _localizedValues = &#123;</span><br><span class="line">    &apos;zh&apos;: LocaleZHCN(),</span><br><span class="line">    &apos;en&apos;: LocaleENUS(),</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  &lt;!--根据不同 locale.languageCode 加载不同语言对应--&gt;</span><br><span class="line">  LocaleBase get currentLocalized &#123;</span><br><span class="line">    return _localizedValues[locale.languageCode];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>实现语言实体基类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">abstract class LocaleBase &#123;</span><br><span class="line">  String title;</span><br><span class="line">  String haha;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>实现语言实体</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &apos;localeBase.dart&apos;;</span><br><span class="line"></span><br><span class="line">class LocaleZHCN extends LocaleBase &#123;</span><br><span class="line">  @override</span><br><span class="line">  String title = &apos;您好&apos;;</span><br><span class="line">  @override</span><br><span class="line">  String haha = &apos;哈哈&apos;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>此外，还需要创建一个Localizations的Widget，通过StoreBuilder绑定store，然后用Localizations.override包裹所有页面。将Store和Localizations的locale绑定。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class LocalizationsWidget extends StatefulWidget &#123;</span><br><span class="line">  final Widget child;</span><br><span class="line">  LocalizationsWidget(&#123;this.child&#125;) : super();</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _LocalizationsWidgetState createState() =&gt; _LocalizationsWidgetState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _LocalizationsWidgetState extends State&lt;LocalizationsWidget&gt; &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return StoreBuilder&lt;HYXState&gt;(builder: (context, store)&#123;</span><br><span class="line">      return Localizations.override(</span><br><span class="line">        child: widget.child,</span><br><span class="line">        context: context,</span><br><span class="line">        locale: store.state.locale,</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>最后，在相应MaterialApp中引入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter_redux/flutter_redux.dart&apos;;</span><br><span class="line"></span><br><span class="line">@override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return StoreProvider(</span><br><span class="line">      store: store,</span><br><span class="line">      child: MaterialApp(</span><br><span class="line">        localizationsDelegates: [</span><br><span class="line">          DemoLocalizationDelegate(),</span><br><span class="line">          GlobalMaterialLocalizations.delegate,</span><br><span class="line">          GlobalWidgetsLocalizations.delegate,</span><br><span class="line">        ],</span><br><span class="line">        supportedLocales: [store.state.locale],</span><br><span class="line">        locale: store.state.locale,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用字段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DemoLocalizations.of(context).currentLocalized.title</span><br></pre></td></tr></table></figure>
</li>
<li><p>切换语言</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">static changeLocale(Store&lt;HYXState&gt; store, int index) &#123;</span><br><span class="line">    Locale locale = store.state.locale;</span><br><span class="line">    switch (index) &#123;</span><br><span class="line">      case 0:</span><br><span class="line">        locale = Locale(&apos;zh&apos;, &apos;CN&apos;);</span><br><span class="line">        break;</span><br><span class="line">      case 1:</span><br><span class="line">        locale = Locale(&apos;en&apos;, &apos;US&apos;);</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">    store.dispatch(RefreshLocaleAction(locale));</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/25/Flutter如何实现状态管理-Redux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/25/Flutter如何实现状态管理-Redux/" itemprop="url">Flutter如何实现状态管理-Redux</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-25T17:58:24+08:00">
                2019-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/flutter/" itemprop="url" rel="index">
                    <span itemprop="name">flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  716
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>从前端的角度实现Flutter状态管理自然是用Redux，至于RxDart、BLoC，暂时还未涉及。</p>
<h4 id="简单回忆一下Redux："><a href="#简单回忆一下Redux：" class="headerlink" title="简单回忆一下Redux："></a>简单回忆一下Redux：</h4><ol>
<li>Store存储和管理全局State</li>
<li>Action用于定义一个State变化的行为</li>
<li>Reducer用于根据Action行为产生新State</li>
</ol>
<h4 id="接下来开始引入并一步步实现："><a href="#接下来开始引入并一步步实现：" class="headerlink" title="接下来开始引入并一步步实现："></a>接下来开始引入并一步步实现：</h4><ul>
<li><p>需要将redux及flutter_redux两个库引入，在pubspec.yaml（相当于package.json）文件中：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">    redux: ^3.0.0</span><br><span class="line">    flutter_redux: ^0.5.2</span><br></pre></td></tr></table></figure>
</li>
<li><p>根据Redux数据流走向，首先定义一个公共Store</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class HYXState &#123;</span><br><span class="line">    ThemeData themeData;</span><br><span class="line">    Locale locale;</span><br><span class="line">    &lt;!--构造方法--&gt;</span><br><span class="line">    HYXState(&#123;this.themeData, this.locale&#125;);</span><br><span class="line">&#125;</span><br><span class="line">存储了主题颜色和国际化语种</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义Action</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class RefreshLocaleAction &#123;</span><br><span class="line">  final Locale locale;</span><br><span class="line">  RefreshLocaleAction(this.locale);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class RefreshThemeDataAction &#123;</span><br><span class="line">  final ThemeData themeData;</span><br><span class="line">  RefreshThemeDataAction(this.themeData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义Reducer</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:redux/redux.dart&apos;;</span><br><span class="line">import &apos;./actions.dart&apos;;</span><br><span class="line"></span><br><span class="line">&lt;!--通过 flutter_redux 的 combineReducers，创建 Reducer&lt;State&gt; --&gt;</span><br><span class="line">final themeDataReducer = combineReducers&lt;ThemeData&gt;([</span><br><span class="line">  &lt;!--将Action与处理Action的方法，用TypedReducer绑定--&gt;</span><br><span class="line">  TypedReducer&lt;ThemeData, RefreshThemeDataAction&gt;(_refresh),</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">&lt;!--定义处理Action的方法，返回新State--&gt;</span><br><span class="line">ThemeData _refresh(ThemeData themeData, action)&#123;</span><br><span class="line">  themeData = action.themeData;</span><br><span class="line">  return themeData;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">final localeReducer = combineReducers&lt;Locale&gt;([</span><br><span class="line">  TypedReducer&lt;Locale, RefreshLocaleAction&gt;(_changeLocale),</span><br><span class="line">]);</span><br><span class="line">Locale _changeLocale(Locale locale, RefreshLocaleAction action)&#123;</span><br><span class="line">  locale = action.locale;</span><br><span class="line">  return locale;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>需要定义Reducer方法appReducer（<strong>自定义方法，用于创建store）</strong>，将Store中的每一个参数和action绑定起来，数据流为<strong>用户每发出一个RefreshLocaleAction，会触发器_refresh方法，之后更新HYXState中的locale</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &apos;./reducer.dart&apos;;</span><br><span class="line"></span><br><span class="line">HYXState appReducer(HYXState state, action) &#123;</span><br><span class="line">  return HYXState(</span><br><span class="line">    themeData: themeDataReducer(state.themeData, action),</span><br><span class="line">    locale: localeReducer(state.locale, action),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>捋清楚好上面的流程后，可以开始实例化store并使用了。类似react-redux提供的Provider包在index.js最外层一样，flutter_redux也提供了StoreProvider用于包括需要的MaterialApp外层，贴出部分重要代码。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter_redux/flutter_redux.dart&apos;;</span><br><span class="line">import &apos;package:redux/redux.dart&apos;;</span><br><span class="line">import &apos;package:demo1/redux/store.dart&apos;;</span><br><span class="line"></span><br><span class="line">class Home extends StatefulWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  _HomeState createState() =&gt; new _HomeState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _HomeState extends State&lt;Home&gt; &#123;</span><br><span class="line">  &lt;!--引入自定义的appReducer，将其余初始化state绑定--&gt;</span><br><span class="line">  final store = Store&lt;HYXState&gt;(appReducer,</span><br><span class="line">      initialState: HYXState(</span><br><span class="line">        // themeData:</span><br><span class="line">        locale: Locale(&apos;zh&apos;, &apos;CN&apos;),</span><br><span class="line">      ));</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return StoreProvider(</span><br><span class="line">      store: store,</span><br><span class="line">      child: MaterialApp(</span><br><span class="line">        &lt;!--你自己child，可以在其内部使用该store中的state--&gt;</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>flutter_redux提供了一个StoreConnector方法，将其包在子组件外，t通过converter转化store.state的数据，通过builder返回的组件，也可以使用StoreProvider。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Widget _itemBuilder(BuildContext context, int index) &#123;</span><br><span class="line">    return StoreConnector&lt;HYXState, Locale&gt;(</span><br><span class="line">      converter: (store) =&gt; store.state.locale,</span><br><span class="line">      builder: (context, locale)&#123;</span><br><span class="line">        return Container(</span><br><span class="line">            child: Column(</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                Container(</span><br><span class="line">                  child: Text(locale.toString()),</span><br><span class="line">                  width: 200,</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            )</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">或：</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">    return StoreBuilder&lt;HYXState&gt;(</span><br><span class="line">      builder: (context, store) &#123;</span><br><span class="line">        return Container(</span><br><span class="line">          child: Column(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Text(store.state.locale.toString()),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如何触发更新？</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在StoreProvider中使用时，用：</span><br><span class="line">store.dispatch(RefreshLocaleAction(locale));</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>至此，Flutter状态管理方案之一Redux基本用法介绍结束，虽然写法比较繁琐，但定义好一套结构后，在复杂业务逻辑中使用起来还是事半功倍的。</p>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/22/hexo添加分类标签等选项/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/22/hexo添加分类标签等选项/" itemprop="url">hexo添加分类标签等选项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-22T18:01:45+08:00">
                2019-02-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  93
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>直接在主题设置文件内打开tags，categories等选项时，页面确实出现了两个选项按钮，但跳转后没有相应路由地址，需要执行<code>hexo new page tags</code>生成，成功后会提示<code>INFO  Created: ~/Desktop/blog/source/tags/index.md</code>，找到该文件，添加type: ‘tags’，如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: tags</span><br><span class="line">date: 2019-02-22 17:44:17</span><br><span class="line">type: &apos;tags&apos;</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<p>其他类似~</p>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/21/hexo个性化配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/21/hexo个性化配置/" itemprop="url">hexo个性化配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-21T16:52:30+08:00">
                2019-02-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  930
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="添加fork-me-on-github"><a href="#添加fork-me-on-github" class="headerlink" title="添加fork me on github"></a>添加fork me on github</h3><p>点击<a href="https://github.blog/2008-12-19-github-ribbons/" target="_blank" rel="noopener">这里(文字)</a>或者<a href="http://tholman.com/github-corners/" target="_blank" rel="noopener">这里(图表)</a>挑选样式,复制代码,将其粘贴到themes/next/layout/_layout.swig文件中的<code>&lt;div class=&quot;headband&quot;&gt;&lt;/div&gt;</code>下面,注意不是里面,并将href改为你的github地址。</p>
<h3 id="添加动态背景"><a href="#添加动态背景" class="headerlink" title="添加动态背景"></a>添加动态背景</h3><p>就是你现在看到页面的背景线<br>修改themes/next/_config.yml下的canvas_nest: <strong>false</strong>为canvas_nest: <strong>true</strong></p>
<h3 id="修改文章内链接文本样式"><a href="#修改文章内链接文本样式" class="headerlink" title="修改文章内链接文本样式"></a>修改文章内链接文本样式</h3><p>修改文件<code>themes\next\source\css\_common\components\post\post.styl</code>,添加css样式,如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.post-body p a&#123;</span><br><span class="line">  color: #0593d3;</span><br><span class="line">  border-bottom: none;</span><br><span class="line">  border-bottom: 1px solid #0593d3;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    color: #fc6423;</span><br><span class="line">    border-bottom: none;</span><br><span class="line">    border-bottom: 1px solid #fc6423;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>.post-body 是为了不影响标题,选择 p 是为了不影响首页“阅读全文”的显示样式,颜色可以自己定义。</p>
<h3 id="修改文章底部tags前的"><a href="#修改文章底部tags前的" class="headerlink" title="修改文章底部tags前的"></a>修改文章底部tags前的</h3><p>修改模板<code>/themes/next/layout/_macro/post.swig</code>,搜索 rel=”tag”&gt;#,将 # 换成 <code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code>,需重启服务生效</p>
<h3 id="在文章末尾统一添加“本文结束”标记"><a href="#在文章末尾统一添加“本文结束”标记" class="headerlink" title="在文章末尾统一添加“本文结束”标记"></a>在文章末尾统一添加“本文结束”标记</h3><p>在<code>\themes\next\layout\_macro</code>下新建<code>passage-end-tag.swig</code>文件,并添加以下内容:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">        &lt;div style=&quot;text-align:center;color: #ccc;font-size:14px;&quot;&gt;-------------本文结束&lt;i class=&quot;fa fa-paw&quot;&gt;&lt;/i&gt;感谢您的阅读-------------&lt;/div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后打开<code>\themes\next\layout\_macro\post.swig</code>文件，在post-body之后，post-footer之前添加以下代码(post-footer之前两个div):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;% if not is_index %&#125;</span><br><span class="line">    &#123;% include &apos;passage-end-tag.swig&apos; %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>其实很好理解，在里面插入一个引入的.swig代码。最后再在根目录下的主题配置文件(_config.yml)的末尾添加:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 文章末尾添加“本文结束”标记</span><br><span class="line">passage_end_tag:</span><br><span class="line">  enabled: true</span><br></pre></td></tr></table></figure></p>
<h3 id="侧边栏社交小图标设置"><a href="#侧边栏社交小图标设置" class="headerlink" title="侧边栏社交小图标设置"></a>侧边栏社交小图标设置</h3><p>打开next主题配置文件<code>themes/next/_config.yml</code>，搜索<code>social_icons</code>，在<a href="https://fontawesome.com/icons?from=io" target="_blank" rel="noopener">这里</a>找到相应的图标，并将名字复制在如下位置，保存即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">social:</span><br><span class="line">  GitHub: https://github.com/hyxkiller || github</span><br><span class="line">  掘金: https://juejin.im/user/5a708d176fb9a01c9b663da5 || 掘金</span><br><span class="line"></span><br><span class="line">social_icons:</span><br><span class="line">  enable: true</span><br><span class="line">  Github: github-square</span><br><span class="line">  掘金: chevron-double-down</span><br></pre></td></tr></table></figure></p>
<p><code>enable: true</code>为控制icons是否显示属性</p>
<h3 id="在网站底部增加访问量"><a href="#在网站底部增加访问量" class="headerlink" title="在网站底部增加访问量"></a>在网站底部增加访问量</h3><p>在<code>\themes\next\layout\_partials\footer.swig</code>文件中，搜索copyright，在前面引入一个库：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script async src=&quot;https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>再在当前文件下适当位置添加展示统计数据的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;powered-by&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-user-md&quot;&gt;&lt;/i&gt;&lt;span id=&quot;busuanzi_container_site_uv&quot;&gt;</span><br><span class="line">    本站访问量:&lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>此处，<code>busuanzi_value_site_pv</code>为访问量，<code>busuanzi_value_site_uv</code>为访客数<br>添加后执行<code>hexo d -g</code>，刷新即可</p>
<h3 id="添加热度"><a href="#添加热度" class="headerlink" title="添加热度"></a>添加热度</h3><p>next主题集成<code>leanCloud</code>，打开<code>/themes/next/layout/_macro/post.swig</code>, 搜索<code>leancloud-visitors-count</code>，在这个span中加℃，然后在<code>/themes/next/languages/zh-Hans.yml</code>,将<code>visitors: 阅读次数</code>换为<code>热度</code>。</p>
<h3 id="添加网站底部字数统计"><a href="#添加网站底部字数统计" class="headerlink" title="添加网站底部字数统计"></a>添加网站底部字数统计</h3><p>安装hexo-wordcount<br><code>npm install hexo-wordcount --save</code><br>然后在<code>/themes/next/layout/_partials/footer.swig</code>文件尾部加上：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;theme-info&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;powered-by&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;span class=&quot;post-count&quot;&gt;博客全站共 totalcount(site) 字&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>其中<code>totalcount(site)</code>需用双大括号包起来。</p>
<h3 id="设置网站的图标Favicon"><a href="#设置网站的图标Favicon" class="headerlink" title="设置网站的图标Favicon"></a>设置网站的图标Favicon</h3><p>在<a href="https://www.easyicon.net/" target="_blank" rel="noopener">EasyIcon</a>中找一张ico图标,或者去别的网站下载或者制作，然后把图标放在/themes/next/source/images里，并且修改主题配置文件<code>themes/next/_config.yml</code>中的favicon为该文件名<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">favicon:</span><br><span class="line">  small: /images/basketball.ico</span><br><span class="line">  medium: /images/basketball.ico</span><br><span class="line">  apple_touch_icon: /images/basketball.ico</span><br><span class="line">  safari_pinned_tab: /images/basketball.ico</span><br></pre></td></tr></table></figure></p>
<h3 id="实现统计功能"><a href="#实现统计功能" class="headerlink" title="实现统计功能"></a>实现统计功能</h3><p>安装hexo-wordcount<br><code>npm install hexo-wordcount --save</code><br>然后在主题配置文件中，修改以下配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">post_wordcount:</span><br><span class="line">  item_text: true</span><br><span class="line">  wordcount: true</span><br><span class="line">  min2read: true</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/20/引入谷歌统计/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/20/引入谷歌统计/" itemprop="url">引入谷歌统计</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-20T23:44:04+08:00">
                2019-02-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="如何加入谷歌统计"><a href="#如何加入谷歌统计" class="headerlink" title="如何加入谷歌统计"></a>如何加入谷歌统计</h2><ol>
<li>创建或登录到您的 Google Analytics帐号( google.com/analytics)</li>
<li>在 Google Analytics（分析）帐号中设置媒体资源。媒体资源代表您的网站或应用。<br> <strong>如何设置媒体资源？</strong><ul>
<li>登录到谷歌分析后，点击左下角管理，在“帐号”列(第一列)中，来选择要向其添加媒体资源的帐号。如果有多个帐号，可使用搜索框找到所需的帐号。</li>
<li>在“媒体资源”列(第二列)中，点击创建新媒体资源。如果您对相应帐号没有“修改”权限，则看不到创建新媒体资源选项。请检查您是否已 从“帐号”列中选择了正确的帐号。</li>
<li>选择网站或移动应用。如果您选择网站，请跳至第 5 步。如果您选择移动应用，请继续执行第 4 步。</li>
<li>（移动应用）在“跟踪方法”下，选择 Firebase。从菜单中选择一个应用，然后点击关联应用。</li>
<li>输入网站名称或应用名称。如果打算在帐号中跟踪多个应用，请使用非常具体的描述性名称，并在其中包含版本号。方便日后管理。（仅限网站）输入网站网址。如果网址的格式不正确，就无法创建媒体资源。</li>
<li>选择行业类别。</li>
<li>选择报告时区。此时区将用作报告的每日起止时间，而无论数据来自何处。</li>
<li>点击获取跟踪 ID。</li>
</ul>
</li>
<li>在您的媒体资源中设置报告数据视图。数据视图支持显示网站的某一部分跟踪数据，过滤掉其他不重要部分的数据。没有创建视图默认是全部网站数据。</li>
<li>按照说明将跟踪代码添加到您的网站或移动应用。<br> <strong>如何查找跟踪ID？</strong><ul>
<li>登录到您的 Google Analytics（分析）帐号</li>
<li>点击左下角管理</li>
<li>从“帐号”列的菜单中选择一个帐号。</li>
<li>从“媒体资源”列的菜单中选择一个媒体资源。</li>
<li>在“媒体资源”下，点击跟踪信息 &gt; 跟踪代码。跟踪 ID 会显示在页面的顶部。     </li>
</ul>
</li>
</ol>
<ul>
<li><p>跟踪代码段 将以下代码段粘贴到网站的每个网页的 <head> 标记之后，并且紧挨着该标记放置。将 GA_TRACKING_ID 替换为您自己的 Google Analytics（分析）跟踪 ID：</head></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script async src=&quot;https://www.googletagmanager.com/gtag/js?id=GA_TRACKING_ID&quot;&gt;&lt;/script&gt;</span><br><span class="line"> &lt;script&gt;</span><br><span class="line">   window.dataLayer = window.dataLayer || [];</span><br><span class="line">   function gtag()&#123;dataLayer.push(arguments);&#125;</span><br><span class="line">   gtag(&apos;js&apos;, new Date());</span><br><span class="line"> </span><br><span class="line">   gtag(&apos;config&apos;, &apos;GA_TRACKING_ID&apos;);</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>验证跟踪代码是否正常工作 要验证跟踪代码是否正常工作，请访问您的网站，并检查您的这次访问是否已在实时报告(在左侧面板中，打开实时类别下的概览。)中记录。</p>
</li>
</ul>
<h2 id="设置事件跟踪"><a href="#设置事件跟踪" class="headerlink" title="设置事件跟踪"></a>设置事件跟踪</h2><ol>
<li>设置时间目标<ul>
<li>登录到您的 Google Analytics（分析）帐号 点击左下角管理</li>
<li>从“帐号”列的菜单中选择一个帐号。</li>
<li>从“媒体资源”列的菜单中选择一个媒体资源。 从“数据视图”列的菜单中选择一个数据视图。</li>
<li>点击目标&gt;自定义按钮&gt;继续，填写名称(最好是你自己可以区分的，有意义的名字例如：打赏按钮)，点击类型下的事件&gt;继续&gt;填写类别、操作、标签和价值(可选)&gt;保存即可。</li>
</ul>
</li>
<li><p>设置事件跟踪<br>在你的网页添加如下类似的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a onClick=&quot;ga(&apos;send&apos;, &apos;event&apos;, &apos;你填写的类别&apos;, &apos;你填写的操作&apos;, &apos;你填写的标签&apos;,&apos;你填写的价值&apos;);&quot; href=&quot;打赏链接&quot; target=&quot;_blank”&gt;打赏&lt;/a&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看事件追踪报告 左侧面板实时&gt;事件即可查看</p>
</li>
</ol>
<h2 id="设置异常跟踪"><a href="#设置异常跟踪" class="headerlink" title="设置异常跟踪"></a>设置异常跟踪</h2><p>在您的网站添加如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ga(&apos;send&apos;, &apos;exception&apos;, [fieldsObject]);</span><br></pre></td></tr></table></figure></p>
<p>例如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">  // Runs code that may or may not work.</span><br><span class="line">  ....</span><br><span class="line">&#125; catch(err) &#123;</span><br><span class="line">  ga(&apos;send&apos;, &apos;exception&apos;, &#123;</span><br><span class="line">    &apos;exDescription&apos;: err.message,//可选 标识对异常的说明。</span><br><span class="line">    &apos;exFatal&apos;: false,//可选 true 表示异常属于严重类型。</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="用户识别"><a href="#用户识别" class="headerlink" title="用户识别"></a>用户识别</h2><p>通过<strong>User ID</strong>进行用户身份识别<br><strong>注意</strong>:USER_ID 值应是一个独一无二的永久性非个人身份字符串，在所有设备上代表对应的用户或已登录帐户。</p>
<ol>
<li><p>如果userId是已知的，可以直接获取到，则只需添加如下代码即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ga(&apos;create&apos;, &apos;UA-XXXXX-Y&apos;, &apos;auto&apos;, &#123;</span><br><span class="line">    userId: USER_ID</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果userId是未知的，需要调用接口才能获取到，那么在获取到userId后执行如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ga(&apos;set&apos;, &apos;userId&apos;, USER_ID);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>添加该段代码后必须再设置一个事件向谷歌统计发送数据（参考谷歌统计之设置事件跟踪文章），例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ga(&apos;send&apos;, &apos;event&apos;, &apos;authentication&apos;, &apos;user-id available&apos;);</span><br></pre></td></tr></table></figure></p>
<h2 id="停用谷歌统计"><a href="#停用谷歌统计" class="headerlink" title="停用谷歌统计"></a>停用谷歌统计</h2><p>在网站添加如下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window[&apos;ga-disable-UA-XXXXX-Y&apos;] = true;</span><br></pre></td></tr></table></figure></p>
<p>其中的值 UA-XXXXX-Y对应于您要停止跟踪的媒体资源 ID。</p>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/20/flutter请求方案/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Yanxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑洞的诞生">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/20/flutter请求方案/" itemprop="url">flutter请求方案</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-20T23:41:36+08:00">
                2019-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/flutter/" itemprop="url" rel="index">
                    <span itemprop="name">flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  59
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h4><ol>
<li><p>pubspec.yaml文件中dev_dependencies下加: http: ^0.11.3+17</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dev_dependencies:</span><br><span class="line">    flutter_test:</span><br><span class="line">        sdk: flutter</span><br><span class="line">    http: ^0.11.3+17</span><br></pre></td></tr></table></figure>
</li>
<li><p>引入<br> import ‘package:http/http.dart’ as http;</p>
</li>
<li>使用 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String url = &apos;http://localhost:9002/tabs&apos;;</span><br><span class="line">var res = await http.get(url);</span><br><span class="line">List list = json.decode(res.body);</span><br><span class="line">setState(() &#123;</span><br><span class="line">  newTitle = list;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ol>

          
        
      
    </div>
    
    
    

    

    <div>
      
    </div>
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Han Yanxi</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/hyxkiller" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/5a708d176fb9a01c9b663da5" target="_blank" title="掘金">
                      
                        <i class="fa fa-fw fa-掘金"></i>掘金</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Han Yanxi</span>

  
</div>

<div class="powered-by">
  <i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
    本站访问量:<span id="busuanzi_value_site_pv"></span>  
  </span>
</div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共7k字</span>
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
